"use strict";(self.webpackChunkcompressa_docs=self.webpackChunkcompressa_docs||[]).push([[639],{7089:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var s=a(4848),t=a(8453);const i={sidebar_position:1,title:"Quickstart Langchain Compressa",sidebar_class_name:"docs_sidebar_index"},o="Quickstart: Langchain Compressa",r={id:"docs/quickstart_langchain",title:"Quickstart Langchain Compressa",description:"This guide shows how to use Compressa into langchain.",source:"@site/docs/docs/quickstart_langchain.md",sourceDirName:"docs",slug:"/docs/quickstart_langchain",permalink:"/docs/quickstart_langchain",draft:!1,unlisted:!1,editUrl:"https://github.com/compressa-ai/compressa-ai.github.io/edit/main/docs/docs/quickstart_langchain.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Quickstart Langchain Compressa",sidebar_class_name:"docs_sidebar_index"},sidebar:"docsSidebar",previous:{title:"About",permalink:"/"},next:{title:"API Reference",permalink:"/docs/api-reference/"}},c={},l=[{value:"Installation",id:"installation",level:2},{value:"Imports",id:"imports",level:2},{value:"Get API_KEY",id:"get-api_key",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"CompressaEmbeddings",id:"compressaembeddings",level:2},{value:"ChatCompressa",id:"chatcompressa",level:2},{value:"CompressaRerank",id:"compressarerank",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"quickstart-langchain-compressa",children:"Quickstart: Langchain Compressa"}),"\n",(0,s.jsx)(n.p,{children:"This guide shows how to use Compressa into langchain."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install langchain-compressa\n"})}),"\n",(0,s.jsx)(n.h2,{id:"imports",children:"Imports"}),"\n",(0,s.jsx)(n.p,{children:"langchain compressa is a platform that offers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"from langchain_compressa import CompressaEmbeddings\nfrom langchain_compressa import ChatCompressa\nfrom langchain_compressa.reranks import CompressaRerank\n"})}),"\n",(0,s.jsx)(n.h2,{id:"get-api_key",children:"Get API_KEY"}),"\n",(0,s.jsxs)(n.p,{children:["You can get the key after registration ",(0,s.jsx)(n.a,{href:"https://compressa.ai/form",children:"registration"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,s.jsx)(n.p,{children:"Make sure to set the following environment variable:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"COMPRESSA_API_KEY"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import os\nos.environ["COMPRESSA_API_KEY"] = "your_key_here"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"compressaembeddings",children:"CompressaEmbeddings"}),"\n",(0,s.jsx)(n.p,{children:"langchain compressa provide work with Compressa embedding models."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from langchain_compressa.embeddings import CompressaEmbeddings\n\nembeddings = CompressaEmbeddings()\n\nembeddings.embed_query("My query to look up")\n\nembeddings.embed_documents(\n    ["This is a content of the document", "This is another document"]\n)\n# async embed query\nawait embeddings.aembed_query("My query to look up")\n\n# async embed documents\nawait embeddings.aembed_documents(\n    ["This is a content of the document", "This is another document"]\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"chatcompressa",children:"ChatCompressa"}),"\n",(0,s.jsx)(n.p,{children:"We can instantiate our model object and generate chat completions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from langchain_compressa import ChatCompressa\n\nllm = ChatCompressa(\n    temperature=0\n)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Invocation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'messages = [\n    (\n        "system",\n        "You are a helpful assistant that translates English to French. Translate the user sentence.",\n    ),\n    ("human", "I love programming."),\n]\nai_msg = llm.invoke(messages)\nai_msg\n'})}),"\n",(0,s.jsx)(n.p,{children:"Chaining"}),"\n",(0,s.jsx)(n.p,{children:"We can chain our model with a prompt template like so:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from langchain_core.prompts import ChatPromptTemplate\n\nprompt = ChatPromptTemplate.from_messages(\n    [\n        (\n            "system",\n            "You are a helpful assistant that translates {input_language} to {output_language}.",\n        ),\n        ("human", "{input}"),\n    ]\n)\n\nchain = prompt | llm\nchain.invoke(\n    {\n        "input_language": "English",\n        "output_language": "German",\n        "input": "I love programming.",\n    }\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"compressarerank",children:"CompressaRerank"}),"\n",(0,s.jsx)(n.p,{children:"We can rerank documents via Compressa and langchain."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from langchain_core.documents import Document\nfrom langchain_compressa.reranks import CompressaRerank\n\n#First, let\'s set a list of standard langchain documents\n\ndocuments = [\n    Document(\n        page_content="""Carson City is the capital city of the American state of Nevada. \n        At the 2010 United States Census, Carson City had a population of 55,274.""",\n        metadata={"source": "https://example.com/1"}\n    ),\n    Document(\n        page_content="""The Commonwealth of the Northern Mariana Islands is a group of islands \n        in the Pacific Ocean that are a political division controlled by the United States. \n        Its capital is Saipan.""",\n        metadata={"source": "https://example.com/2"}\n    ),\n    Document(\n        page_content="""Charlotte Amalie is the capital and largest city of the United States \n        Virgin Islands. It has about 20,000 people. The city is on the island of Saint Thomas.""",\n        metadata={"source": "https://example.com/3"}\n    ),\n    Document(\n        page_content="""Washington, D.C. (also known as simply Washington or D.C., and \n        officially as the District of Columbia) is the capital of the United States. \n        It is a federal district. The President of the USA and many major national government offices \n        are in the territory. This makes it the political center of the United States of America.""",\n        metadata={"source": "https://example.com/4"}\n    ), \n    Document(\n        page_content="""Capital punishment (the death penalty) has existed in the United States \n        since before the United States was a country. As of 2017, capital punishment is legal \n        in 30 of the 50 states. The federal government (including the United States military) \n        also uses capital punishment.""",\n        metadata={"source": "https://example.com/5"}\n    )\n]\n\nquery = "What is the capital of the United States?"\n\n#Next, we define a reranker\nreranker = CompressaRerank()\n\n#And then we can rerank the documents for the question\ncompress_res = reranker.compress_documents(query=query,  documents=documents)\n'})})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var s=a(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);